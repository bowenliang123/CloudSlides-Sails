// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('holdmeetingCtrl', ['User', 'Ppt', 'Meeting']).controller('holdmeetingCtrl', function($scope, $timeout, User, Ppt, Meeting) {
    var init;
    init = function() {
      return $scope.refreshMeetingData();
    };
    $scope.holdNewMeeting = function() {
      var pptId, topic;
      pptId = $scope.pptId;
      topic = $scope.newMeetingTopic;
      console.log($scope.pptId + ' ' + $scope.newMeetingTopic);
      return Meeting.create({
        holderId: User.getUserId(),
        pptId: pptId,
        topic: topic
      }, function(value, responseHeaders) {
        if (value.status === 0) {
          $scope.refreshMeetingData();
          return $('#holdNewMeetingModal').modal('hide');
        }
      }, function(httpResponse) {
        return console.log(httpResponse);
      });
    };
    $scope.deleteHoldMeeting = function(meetingId) {
      return Meeting["delete"]({
        meetingId: meetingId
      }, function(value, responseHeaders) {
        console.log(value);
        if (value.status === 0) {
          alert('删除成功');
          return $scope.refreshMeetingData();
        }
      }, function(httpResponse) {});
    };
    $scope.refreshMeetingData = function() {
      console.log('refreshMeetingData');
      return Meeting.query({
        holder: User.getUserId()
      }, function(value, responseHeaders) {
        return $scope.holdMeetings = value;
      }, function(httpResponse) {});
    };
    $scope.showModalHoldNewMeeting = function() {
      $('#holdNewMeetingModal').modal('show');
      $scope.ppts = [];
      return Ppt.query({
        owner: User.getUserId()
      }, function(value, responseHeaders) {
        return $scope.ppts = value;
      }, function(httpResponse) {});
    };
    $scope.holdMeetings = [];
    $scope.ppts = [];
    $scope.newMeetingPptId = '';
    return init();
  });

}).call(this);

//# sourceMappingURL=holdmeetingCtrl.map
