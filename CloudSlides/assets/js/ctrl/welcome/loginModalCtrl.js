// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('welcome.loginModalCtrl', ['User']).controller('welcome.loginModalCtrl', function($scope, $rootScope, $location, User) {
    return $scope.login = function() {
      var email, password;
      email = $scope.loginEmail;
      password = $scope.loginPassword;
      return User.login({
        email: email,
        password: password
      }, function(value, responseHeaders) {
        var data, status;
        status = value.status;
        data = value.data;
        if (status === 101) {
          alert('电邮及密码配对不正确');
        } else if (status === 0) {
          User.setLoginInfo(data.user, data.token);
          $('#loginModal').modal('hide');
          $rootScope.$broadcast('login_success');
          return $location.url('/myppt');
        }
      }, function(httpResponse) {
        return console.log(httpResponse);
      });
    };
  });

}).call(this);

//# sourceMappingURL=loginModalCtrl.map
